// Hide navigation container on category pages
.navigation-categories .navigation-container,
.categories-list .navigation-container {
  display: none;
}

// Navigation container redesign
.navigation-container {
  display: flex !important;
  justify-content: space-between;
  align-items: center;
  padding: 0.5em 0;
  gap: 0.75em;
  flex-wrap: nowrap;
  
  // Hide unwanted elements in navigation container
  .nav-pills,
  .navigation-controls,
  .list-controls,
  > *:not(.category-breadcrumb):not(.combo-box.tag-drop):not(.topic-navigation-filter) {
    display: none !important;
  }
  
  // When there's no category/tag, ensure filter is still on the right
  &:not(:has(.category-breadcrumb, .combo-box.tag-drop)) {
    justify-content: flex-end;
  }
  
  // Left side: category and tag dropdowns
  .category-breadcrumb,
  .combo-box.tag-drop {
    margin: 0 !important;
    flex: 0 0 auto;
    
    .select-kit-header {
      border-radius: 1.5em !important; // Rounded border
      padding: 0.6em 1.2em !important;
      height: auto !important;
      min-height: 2.8em;
      display: flex !important;
      align-items: center;
      gap: 0.6em;
      border: 1px solid var(--primary-low-mid) !important;
      background: var(--secondary) !important;
      transition: all 0.15s ease-in-out;
      
      &:hover {
        border-color: var(--primary-low);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      
      // Hide default icons
      .d-icon:not(.d-icon-caret-down):not(.d-icon-chevron-down) {
        display: none !important;
      }
      
      // Custom icon before text using FontAwesome
      &::before {
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        font-size: 1em;
        color: var(--primary-medium);
        flex-shrink: 0;
        order: -2;
      }
      
      .selected-name,
      .name {
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        order: -1;
      }
      
      // Replace caret-down with caret-right icon
      .d-icon-caret-down,
      .d-icon-chevron-down {
        margin-left: auto;
        flex-shrink: 0;
        order: 1;
        
        &::before {
          content: "\f054" !important; // caret-right icon
          font-family: "Font Awesome 6 Free";
          font-weight: 900;
        }
        
        svg {
          display: none;
        }
      }
    }
  }
  
  // Category breadcrumb - layer-group icon
  .category-breadcrumb {
    .select-kit-header::before {
      content: "\f5fd"; // layer-group
    }
  }
  
  // Tag drop - hashtag icon
  .combo-box.tag-drop {
    .select-kit-header::before {
      content: "\f292"; // hashtag
    }
  }
  
  // Right side: topic navigation filter
  .topic-navigation-filter {
    margin-left: auto;
    flex: 0 0 auto;
  }
}

// Topic navigation filter dropdown styling
.topic-navigation-filter {
  .select-kit-header {
    border-radius: 1.5em !important;
    padding: 0.6em 1.2em !important;
    min-height: 2.8em;
    display: flex !important;
    align-items: center;
    gap: 0.6em;
    border: 1px solid var(--primary-low-mid) !important;
    background: var(--secondary) !important;
    transition: all 0.15s ease-in-out;
    
    &:hover {
      border-color: var(--primary-low);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .d-icon {
      flex-shrink: 0;
    }
    
    .selected-name {
      flex: 1;
      font-weight: 500;
    }
    
    .d-icon-caret-down,
    .d-icon-chevron-down {
      margin-left: 0.3em;
      flex-shrink: 0;
    }
  }
  
  .select-kit-body {
    border-radius: 0.5em !important;
    margin-top: 0.25em;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

// New topic button in header
.before-header-panel-outlet {
  margin-left: auto;

  + .panel {
    margin-left: 0;
  }

  // allows the tooltip to match the button height
  .fk-d-button-tooltip {
    align-items: stretch;
  }

  .fk-d-tooltip__trigger {
    height: unset;
  }
}

@media (max-width: 767px) {
  #new-create-topic span {
    display: none;
  }

  #new-create-topic .d-icon {
    margin-right: 0;
  }
}

.anon {
  #new-create-topic {
    // match default login button size
    font-size: var(--font-down-1);
    margin-right: 0.5em;
    position: relative;
    top: 0.1em; // optical alignment
  }
}
